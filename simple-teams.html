<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Håndæg og Håndbajere - Hold</title>
    <link rel="stylesheet" href="teams-styles.css">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="sync-manager.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="app-header">
            <h1 class="app-title">🏈 Håndæg og Håndbajere</h1>
            <p class="app-subtitle">Opret Hold</p>
            <div class="sync-status" id="syncStatus">
                <span class="status-indicator" id="statusIndicator">🔄</span>
                <span class="status-text" id="statusText">Loading...</span>
            </div>
        </header>

        <!-- Navigation -->
        <section class="navigation-section">
            <a href="index.html" class="nav-btn">← Tilbage til Spillere</a>
        </section>

        <!-- Team Count Controls -->
        <section class="team-controls-section">
            <div class="team-controls-card">
                <h2 class="section-title">⚙️ Hold Indstillinger</h2>
                <div class="team-count-controls">
                    <label for="teamCountInput">Antal Hold:</label>
                    <div class="count-input-group">
                        <button id="decreaseTeamsBtn" class="count-btn">-</button>
                        <input type="number" id="teamCountInput" min="2" max="20" value="3" readonly>
                        <button id="increaseTeamsBtn" class="count-btn">+</button>
                    </div>
                    <div class="team-count-info">
                        <small>Minimum 2 hold, maksimum 20 hold</small>
                    </div>
                </div>
            </div>
        </section>

        <!-- Main Content -->
        <div id="mainContent">
            <!-- Team Names Section -->
            <section class="team-names-section">
                <h2 class="section-title">📝 Hold Navne</h2>
                <div class="team-names-grid" id="teamNamesGrid">
                    <p>Indlæser hold...</p>
                </div>
            </section>

            <!-- Controls Section -->
            <section class="controls-section">
                <h2 class="section-title">🎲 Handlinger</h2>
                <div class="control-buttons">
                    <button id="shuffleBtn" class="control-btn primary">🔀 Bland Hold</button>
                    <button id="resetBtn" class="control-btn secondary">🔄 Nulstil</button>
                    <button id="autoDistributeBtn" class="control-btn tertiary">⚡ Auto-fordel</button>
                </div>
            </section>

            <!-- Unassigned Players Section -->
            <section class="unassigned-section">
                <h2 class="section-title">
                    👥 Ikke-tildelte Spillere 
                    <span class="player-count-badge" id="unassignedCount">0</span>
                </h2>
                <div class="players-pool" id="playersPool">
                    <p>Indlæser spillere...</p>
                </div>
            </section>

            <!-- Teams Section -->
            <section class="teams-section">
                <div class="teams-grid" id="teamsGrid">
                    <p>Indlæser hold...</p>
                </div>
            </section>

            <!-- Action Section -->
            <section class="action-section">
                <a href="games.html" id="continueBtn" class="continue-btn disabled">
                    Fortsæt til Spil
                </a>
                <p class="requirement-text" id="requirementText">
                    Indlæser...
                </p>
            </section>
        </div>

        <!-- Debug Panel -->
        <div id="debugPanel" style="display: none; position: fixed; top: 60px; right: 10px; background: white; border: 2px solid #ccc; padding: 15px; border-radius: 10px; z-index: 9999; box-shadow: 0 4px 15px rgba(0,0,0,0.2); max-width: 300px;">
            <h4 style="margin: 0 0 10px 0; color: #333;">🔧 Debug Panel</h4>
            <button onclick="showDeviceInfo()" style="display: block; margin: 5px 0; padding: 8px; background: #45B7D1; color: white; border: none; border-radius: 5px; width: 100%; cursor: pointer;">
                📊 Show Device Info
            </button>
            <button onclick="resetDeviceData()" style="display: block; margin: 5px 0; padding: 8px; background: #FF6B6B; color: white; border: none; border-radius: 5px; width: 100%; cursor: pointer;">
                🔄 Reset Device Data
            </button>
            <button onclick="forceCloudSync()" style="display: block; margin: 5px 0; padding: 8px; background: #4ECDC4; color: white; border: none; border-radius: 5px; width: 100%; cursor: pointer;">
                ☁️ Force Cloud Sync
            </button>
            <button onclick="hideDebugPanel()" style="display: block; margin: 5px 0; padding: 8px; background: #666; color: white; border: none; border-radius: 5px; width: 100%; cursor: pointer;">
                ❌ Close
            </button>
        </div>

        <!-- Debug toggle button -->
        <button onclick="toggleDebugPanel()" style="position: fixed; top: 10px; right: 10px; z-index: 9999; background: #FF9A42; color: white; padding: 8px 12px; border: none; border-radius: 5px; font-size: 12px; cursor: pointer;">
            🔧 DEBUG
        </button>
    </div>

    <script>
        // UNLIMITED teams management
        let players = [];
        let teams = [];
        let teamNames = [];
        let desiredTeamCount = 3;

        // DOM elements
        const teamCountInput = document.getElementById('teamCountInput');
        const decreaseTeamsBtn = document.getElementById('decreaseTeamsBtn');
        const increaseTeamsBtn = document.getElementById('increaseTeamsBtn');
        const teamNamesGrid = document.getElementById('teamNamesGrid');
        const shuffleBtn = document.getElementById('shuffleBtn');
        const resetBtn = document.getElementById('resetBtn');
        const autoDistributeBtn = document.getElementById('autoDistributeBtn');
        const playersPool = document.getElementById('playersPool');
        const teamsGrid = document.getElementById('teamsGrid');
        const continueBtn = document.getElementById('continueBtn');
        const requirementText = document.getElementById('requirementText');
        const unassignedCount = document.getElementById('unassignedCount');
        const syncStatus = document.getElementById('syncStatus');
        const statusIndicator = document.getElementById('statusIndicator');
        const statusText = document.getElementById('statusText');

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Teams page starting...');
            
            // Load data immediately
            loadData();
            
            // Setup event listeners
            setupEventListeners();
            
            // Update UI
            updateUI();
            
            // Update sync status
            updateSyncStatus();
        });

        function loadData() {
            // Load players - GUARANTEED to work
            try {
                const playersData = localStorage.getItem('bakken-players');
                if (playersData) {
                    const parsed = JSON.parse(playersData);
                    players = Array.isArray(parsed) ? parsed : [];
                } else {
                    players = [];
                }
                console.log('📥 Loaded players:', players.length);
            } catch (e) {
                console.error('❌ Players load failed:', e);
                players = [];
            }

            // Load teams - GUARANTEED to work
            try {
                const teamsData = localStorage.getItem('bakken-teams');
                if (teamsData) {
                    const parsed = JSON.parse(teamsData);
                    if (parsed && parsed.teams && Array.isArray(parsed.teams)) {
                        teams = parsed.teams;
                        teamNames = parsed.teamNames || generateDefaultTeamNames(teams.length);
                        desiredTeamCount = teams.length;
                        teamCountInput.value = desiredTeamCount;
                    } else {
                        teams = [];
                        teamNames = [];
                    }
                } else {
                    teams = [];
                    teamNames = [];
                }
                console.log('📥 Loaded teams:', teams.length);
            } catch (e) {
                console.error('❌ Teams load failed:', e);
                teams = [];
                teamNames = [];
            }

            // Initialize teams if needed
            if (players.length > 0 && teams.length === 0) {
                initializeTeams(desiredTeamCount);
            }

            // GUARANTEE teams is always an array
            if (!Array.isArray(teams)) {
                teams = [];
            }
        }

        function generateDefaultTeamNames(count) {
            const names = [];
            for (let i = 1; i <= count; i++) {
                names.push(`Hold ${i}`);
            }
            return names;
        }

        function initializeTeams(teamCount = 3) {
            if (teamCount < 2) teamCount = 2;
            if (teamCount > 20) teamCount = 20;
            
            teams = [];
            teamNames = generateDefaultTeamNames(teamCount);
            
            for (let i = 0; i < teamCount; i++) {
                teams.push({
                    id: i + 1,
                    name: teamNames[i],
                    players: []
                });
            }
            
            desiredTeamCount = teamCount;
            teamCountInput.value = teamCount;
            
            console.log('🏗️ Initialized teams:', teams.length);
        }

        function changeTeamCount(newCount) {
            if (newCount < 2) newCount = 2;
            if (newCount > 20) newCount = 20;
            
            const oldCount = teams.length;
            desiredTeamCount = newCount;
            teamCountInput.value = newCount;
            
            if (newCount > oldCount) {
                // Add new teams
                for (let i = oldCount; i < newCount; i++) {
                    const teamName = `Hold ${i + 1}`;
                    teams.push({
                        id: i + 1,
                        name: teamName,
                        players: []
                    });
                    teamNames.push(teamName);
                }
                console.log(`➕ Added ${newCount - oldCount} teams`);
            } else if (newCount < oldCount) {
                // Remove teams and redistribute players
                const playersToRedistribute = [];
                
                // Collect players from teams being removed
                for (let i = newCount; i < oldCount; i++) {
                    if (teams[i] && teams[i].players) {
                        playersToRedistribute.push(...teams[i].players);
                    }
                }
                
                // Remove excess teams
                teams = teams.slice(0, newCount);
                teamNames = teamNames.slice(0, newCount);
                
                // Redistribute collected players
                if (playersToRedistribute.length > 0) {
                    playersToRedistribute.forEach((player, index) => {
                        const targetTeamIndex = index % newCount;
                        teams[targetTeamIndex].players.push(player);
                    });
                }
                
                console.log(`➖ Removed ${oldCount - newCount} teams, redistributed ${playersToRedistribute.length} players`);
            }
            
            saveData();
            updateUI();
            showMessage(`🔄 Ændret til ${newCount} hold`, '#4ECDC4');
        }

        function saveData() {
            try {
                const teamsData = {
                    teams: teams,
                    teamNames: teamNames,
                    lastUpdated: Date.now()
                };
                
                localStorage.setItem('bakken-teams', JSON.stringify(teamsData));
                console.log('💾 Saved teams data');
                
                // Sync to cloud if available
                if (window.syncManager && window.syncManager.syncTeams) {
                    window.syncManager.syncTeams(teamsData);
                }
            } catch (e) {
                console.error('❌ Save failed:', e);
            }
        }

        function setupEventListeners() {
            // Team count controls
            decreaseTeamsBtn.addEventListener('click', function() {
                changeTeamCount(desiredTeamCount - 1);
            });
            
            increaseTeamsBtn.addEventListener('click', function() {
                changeTeamCount(desiredTeamCount + 1);
            });
            
            teamCountInput.addEventListener('change', function() {
                const newCount = parseInt(this.value) || 3;
                changeTeamCount(newCount);
            });

            // Action buttons
            shuffleBtn.addEventListener('click', shuffleTeams);
            resetBtn.addEventListener('click', resetTeams);
            autoDistributeBtn.addEventListener('click', autoDistributeTeams);
        }

        function updateUI() {
            // ALWAYS ensure teams is an array
            if (!Array.isArray(teams)) {
                teams = [];
            }
            
            updateTeamCountControls();
            updateTeamNamesGrid();
            updateTeamsGrid();
            updatePlayersPool();
            updateContinueButton();
            updateUnassignedCount();
        }

        function updateTeamCountControls() {
            decreaseTeamsBtn.disabled = desiredTeamCount <= 2;
            increaseTeamsBtn.disabled = desiredTeamCount >= 20;
        }

        function updateTeamNamesGrid() {
            if (teams.length === 0) {
                teamNamesGrid.innerHTML = '<p>Ingen hold oprettet endnu</p>';
                return;
            }
            
            teamNamesGrid.innerHTML = teams.map((team, index) => `
                <div class="team-name-input">
                    <label for="teamName${index}">Hold ${index + 1}:</label>
                    <input type="text" id="teamName${index}" value="${escapeHtml(team.name)}" 
                           onchange="updateTeamName(${index}, this.value)" maxlength="20">
                </div>
            `).join('');
        }

        function updateTeamsGrid() {
            if (teams.length === 0) {
                teamsGrid.innerHTML = '<p>Ingen hold oprettet endnu</p>';
                return;
            }
            
            teamsGrid.innerHTML = teams.map((team, index) => `
                <div class="team-card">
                    <div class="team-header">
                        <div class="team-info">
                            <div class="team-color-indicator team-${(index % 12) + 1}-color"></div>
                            <span class="team-name">${escapeHtml(team.name)}</span>
                        </div>
                        <span class="team-count">${(team.players || []).length}</span>
                    </div>
                    <div class="team-players ${(team.players || []).length === 0 ? 'empty' : ''}" 
                         data-team-id="${team.id}"
                         ondrop="dropPlayer(event, ${team.id})"
                         ondragover="allowDrop(event)">
                        ${(team.players || []).map(player => `
                            <div class="player-chip in-team-${(index % 12) + 1}" 
                                 draggable="true" 
                                 data-player-id="${player.id}"
                                 ondragstart="dragStart(event, '${player.id}')">
                                ${escapeHtml(player.name)}
                            </div>
                        `).join('')}
                        ${(team.players || []).length === 0 ? '<div class="empty-team-message">Træk spillere hertil</div>' : ''}
                    </div>
                </div>
            `).join('');
        }

        function updatePlayersPool() {
            const unassignedPlayers = getUnassignedPlayers();
            
            if (unassignedPlayers.length === 0) {
                playersPool.innerHTML = '<p>Alle spillere er tildelt hold</p>';
            } else {
                playersPool.innerHTML = unassignedPlayers.map(player => `
                    <div class="player-chip" 
                         draggable="true" 
                         data-player-id="${player.id}"
                         ondragstart="dragStart(event, '${player.id}')">
                        ${escapeHtml(player.name)}
                    </div>
                `).join('');
            }
        }

        function updateUnassignedCount() {
            const count = getUnassignedPlayers().length;
            unassignedCount.textContent = count;
        }

        function updateContinueButton() {
            const unassignedCount = getUnassignedPlayers().length;
            
            if (unassignedCount === 0 && players.length > 0 && teams.length >= 2) {
                continueBtn.classList.remove('disabled');
                continueBtn.style.pointerEvents = 'auto';
                requirementText.textContent = 'Klar til at starte spil!';
            } else {
                continueBtn.classList.add('disabled');
                continueBtn.style.pointerEvents = 'none';
                if (players.length === 0) {
                    requirementText.textContent = 'Tilføj spillere først';
                } else if (teams.length < 2) {
                    requirementText.textContent = 'Minimum 2 hold krævet';
                } else {
                    requirementText.textContent = `${unassignedCount} spillere skal tildeles hold`;
                }
            }
        }

        function getUnassignedPlayers() {
            if (!Array.isArray(teams) || !Array.isArray(players)) {
                return players || [];
            }
            
            const assignedPlayerIds = teams.flatMap(team => 
                (team.players || []).map(p => p.id)
            );
            return players.filter(player => !assignedPlayerIds.includes(player.id));
        }

        function updateTeamName(index, newName) {
            if (teams[index]) {
                teams[index].name = newName.trim() || `Hold ${index + 1}`;
                teamNames[index] = teams[index].name;
                saveData();
                updateTeamsGrid();
                showMessage(`Hold ${index + 1} omdøbt`, '#4ECDC4');
            }
        }

        function shuffleTeams() {
            if (players.length === 0) {
                alert('Ingen spillere at blande');
                return;
            }
            
            if (teams.length === 0) {
                initializeTeams(desiredTeamCount);
            }
            
            // Clear all teams
            teams.forEach(team => team.players = []);
            
            // Shuffle players
            const shuffledPlayers = [...players].sort(() => Math.random() - 0.5);
            
            // Distribute players evenly
            shuffledPlayers.forEach((player, index) => {
                const teamIndex = index % teams.length;
                teams[teamIndex].players.push(player);
            });
            
            saveData();
            updateUI();
            showMessage('Hold blandet!', '#4ECDC4');
        }

        function resetTeams() {
            if (teams.length === 0) {
                alert('Ingen hold at nulstille');
                return;
            }
            
            if (confirm('Nulstil alle hold?')) {
                teams.forEach(team => team.players = []);
                saveData();
                updateUI();
                showMessage('Hold nulstillet', '#FF9A42');
            }
        }

        function autoDistributeTeams() {
            if (players.length === 0) {
                alert('Ingen spillere at fordele');
                return;
            }
            
            if (teams.length === 0) {
                initializeTeams(desiredTeamCount);
            }
            
            // Clear all teams
            teams.forEach(team => team.players = []);
            
            // Distribute players evenly (no shuffling)
            players.forEach((player, index) => {
                const teamIndex = index % teams.length;
                teams[teamIndex].players.push(player);
            });
            
            saveData();
            updateUI();
            showMessage('Spillere auto-fordelt!', '#4ECDC4');
        }

        // Drag and Drop functions
        function dragStart(event, playerId) {
            event.dataTransfer.setData('text/plain', playerId);
            event.target.style.opacity = '0.5';
        }

        function allowDrop(event) {
            event.preventDefault();
            event.currentTarget.classList.add('drag-over');
        }

        function dropPlayer(event, teamId) {
            event.preventDefault();
            event.currentTarget.classList.remove('drag-over');
            
            const playerId = event.dataTransfer.getData('text/plain');
            const player = players.find(p => p.id === playerId);
            
            if (!player) return;
            
            // Remove from current team
            teams.forEach(team => {
                if (team.players) {
                    team.players = team.players.filter(p => p.id !== playerId);
                }
            });
            
            // Add to new team
            const targetTeam = teams.find(t => t.id === teamId);
            if (targetTeam) {
                if (!targetTeam.players) targetTeam.players = [];
                targetTeam.players.push(player);
            }
            
            saveData();
            updateUI();
            showMessage(`${player.name} flyttet`, '#4ECDC4');
        }

        // Handle drag end
        document.addEventListener('dragend', function(event) {
            event.target.style.opacity = '';
            document.querySelectorAll('.drag-over').forEach(el => {
                el.classList.remove('drag-over');
            });
        });

        function updateSyncStatus() {
            if (window.syncManager) {
                const status = window.syncManager.getStatus();
                
                if (status.initialized && status.hasSupabase && status.online) {
                    statusIndicator.textContent = '☁️';
                    statusText.textContent = 'Synced';
                    syncStatus.style.background = 'rgba(78, 205, 196, 0.3)';
                } else {
                    statusIndicator.textContent = '📱';
                    statusText.textContent = 'Local only';
                    syncStatus.style.background = 'rgba(102, 102, 102, 0.3)';
                }
            } else {
                statusIndicator.textContent = '📱';
                statusText.textContent = 'Local only';
                syncStatus.style.background = 'rgba(102, 102, 102, 0.3)';
            }
        }

        function showMessage(message, color) {
            const messageDiv = document.createElement('div');
            messageDiv.style.cssText = `
                position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
                background: ${color}; color: white; padding: 12px 20px;
                border-radius: 8px; z-index: 1000; font-weight: 500;
            `;
            messageDiv.textContent = message;
            document.body.appendChild(messageDiv);
            setTimeout(() => messageDiv.remove(), 3000);
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Debug functions
        function toggleDebugPanel() {
            const panel = document.getElementById('debugPanel');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
        }

        function hideDebugPanel() {
            document.getElementById('debugPanel').style.display = 'none';
        }

        function showDeviceInfo() {
            const tournamentId = localStorage.getItem('bakken-tournament-id');
            const players = JSON.parse(localStorage.getItem('bakken-players') || '[]');
            const teams = JSON.parse(localStorage.getItem('bakken-teams') || '{}');
            
            const info = `🔍 DEVICE INFO:
Tournament ID: ${tournamentId || 'None'}
Players: ${players.length} (${players.map(p => p.name).join(', ')})
Teams: ${teams.teams ? teams.teams.length : 0}
Sync: ${window.syncManager ? 'Available' : 'Not Available'}
Device: ${navigator.userAgent.includes('Mobile') ? 'Mobile' : 'Desktop'}`;
            
            alert(info);
        }

        function resetDeviceData() {
            if (confirm('Reset all data on this device?')) {
                if (window.syncManager && window.syncManager.resetAndSync) {
                    window.syncManager.resetAndSync();
                } else {
                    localStorage.removeItem('bakken-tournament-id');
                    localStorage.removeItem('bakken-players');
                    localStorage.removeItem('bakken-teams');
                    localStorage.removeItem('bakken-games');
                    alert('✅ Device data cleared! Reloading...');
                    location.reload();
                }
            }
        }

        function forceCloudSync() {
            if (window.syncManager) {
                alert('🔄 Forcing cloud sync...');
                window.syncManager.loadFromCloud().then(data => {
                    if (data && data.teams) {
                        const teamsData = {
                            teams: data.teams.teams_data || [],
                            teamNames: data.teams.team_names || []
                        };
                        localStorage.setItem('bakken-teams', JSON.stringify(teamsData));
                        loadData();
                        updateUI();
                    }
                    alert('✅ Cloud sync completed!');
                }).catch(error => {
                    alert('❌ Cloud sync failed: ' + error.message);
                });
            } else {
                alert('❌ Sync manager not available');
            }
        }

        // Debug function
        window.debugTeams = function() {
            console.log('🔍 Debug:');
            console.log('Players:', players);
            console.log('Teams:', teams);
            console.log('Desired Team Count:', desiredTeamCount);
            console.log('Teams is array:', Array.isArray(teams));
        };

        // Update sync status periodically
        setInterval(updateSyncStatus, 3000);
    </script>

    <style>
        /* Additional styles for unlimited teams */
        .team-controls-section {
            margin: 20px 0;
        }

        .team-controls-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 2px solid #FFB366;
        }

        .team-count-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .count-input-group {
            display: flex;
            align-items: center;
            gap: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 5px;
        }

        .count-btn {
            background: #FFB366;
            color: white;
            border: none;
            border-radius: 6px;
            width: 35px;
            height: 35px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .count-btn:hover:not(:disabled) {
            background: #FF9A42;
            transform: scale(1.1);
        }

        .count-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        #teamCountInput {
            width: 60px;
            text-align: center;
            border: 2px solid #ddd;
            border-radius: 6px;
            padding: 8px;
            font-size: 16px;
            font-weight: bold;
        }

        .team-count-info {
            color: #666;
            font-size: 0.9rem;
        }

        .control-btn.tertiary {
            background: #9B59B6;
            color: white;
        }

        .control-btn.tertiary:hover {
            background: #8E44AD;
        }

        /* Support for more team colors */
        .team-1-color { background: #FF6B6B; }
        .team-2-color { background: #4ECDC4; }
        .team-3-color { background: #45B7D1; }
        .team-4-color { background: #96CEB4; }
        .team-5-color { background: #FFEAA7; }
        .team-6-color { background: #DDA0DD; }
        .team-7-color { background: #98D8C8; }
        .team-8-color { background: #F7DC6F; }
        .team-9-color { background: #BB8FCE; }
        .team-10-color { background: #85C1E9; }
        .team-11-color { background: #F8C471; }
        .team-12-color { background: #82E0AA; }

        .in-team-1 { background: #FF6B6B; }
        .in-team-2 { background: #4ECDC4; }
        .in-team-3 { background: #45B7D1; }
        .in-team-4 { background: #96CEB4; }
        .in-team-5 { background: #FFEAA7; }
        .in-team-6 { background: #DDA0DD; }
        .in-team-7 { background: #98D8C8; }
        .in-team-8 { background: #F7DC6F; }
        .in-team-9 { background: #BB8FCE; }
        .in-team-10 { background: #85C1E9; }
        .in-team-11 { background: #F8C471; }
        .in-team-12 { background: #82E0AA; }

        .empty-team-message {
            color: #999;
            font-style: italic;
            text-align: center;
            padding: 20px;
            border: 2px dashed #ddd;
            border-radius: 8px;
            margin: 10px 0;
        }

        .drag-over .empty-team-message {
            border-color: #FFB366;
            color: #FFB366;
        }

        /* Responsive grid for many teams */
        .teams-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .team-count-controls {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .teams-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</body>
</html>