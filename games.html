<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Håndæg og Håndbajere - Spil</title>
    <link rel="stylesheet" href="games-styles.css">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="sync-manager.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="app-header">
            <h1 class="app-title">🏈 Håndæg og Håndbajere</h1>
            <p class="app-subtitle">Spil & Resultater</p>
            <div class="sync-status" id="syncStatus">
                <span class="status-indicator" id="statusIndicator">🔄</span>
                <span class="status-text" id="statusText">Connecting...</span>
            </div>
        </header>

        <!-- Navigation -->
        <section class="navigation-section">
            <a href="simple-teams.html" class="nav-btn">← Tilbage til Hold</a>
            <a href="photos.html" class="nav-btn primary">📸 Billeder</a>
        </section>

        <!-- Current Standings -->
        <section class="standings-section">
            <h2 class="section-title">🏆 Aktuel Stilling</h2>
            <div class="standings-grid" id="standingsGrid">
                <div class="loading-standings">Indlæser stilling...</div>
            </div>
        </section>

        <!-- Add Game Section -->
        <section class="add-game-section">
            <div class="add-game-card">
                <h2 class="section-title">➕ Tilføj Nyt Spil</h2>
                <div class="input-group">
                    <input type="text" 
                           id="gameNameInput" 
                           placeholder="Indtast spil navn (f.eks. 'Fodbold', 'Løb', 'Quiz')" 
                           maxlength="50">
                    <button id="addGameBtn" class="add-game-btn" disabled>
                        ➕ Tilføj & Indtast Resultat
                    </button>
                </div>
                <div class="add-game-hint">
                    <small>Indtast spil navn og resultat popup åbner automatisk</small>
                </div>
            </div>
        </section>

        <!-- Completed Games Section -->
        <section class="completed-section">
            <h2 class="section-title">
                ✅ Afsluttede Spil 
                <span class="completed-badge" id="completedCount">0</span>
            </h2>
            <div class="completed-games" id="completedGames">
                <div class="no-completed">
                    <p>Ingen afsluttede spil endnu</p>
                </div>
            </div>
        </section>

        <!-- Finish Tournament Section -->
        <section class="finish-section">
            <h2 class="section-title">🏁 Afslut Turnering</h2>
            <button id="finishTournamentBtn" class="finish-btn" disabled>
                🏁 Afslut Turnering
            </button>
            <div class="finish-hint">
                <small>Afslut turneringen når alle spil er færdige</small>
            </div>
        </section>
    </div>

    <!-- Results Modal/Popup -->
    <div class="results-modal" id="resultsModal">
        <div class="modal-backdrop" onclick="closeResultsModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalGameTitle">🎯 Indtast Resultater</h2>
                <button class="close-btn" onclick="closeResultsModal()">&times;</button>
            </div>
            
            <div class="modal-body">
                <div class="game-info">
                    <h3 id="modalGameName">Spil Navn</h3>
                    <p class="scoring-info">🏆 Point System: 1. plads = 2 point, 2. plads = 1 point, 3. plads = 0 point</p>
                </div>
                
                <div class="winner-selection">
                    <div class="winner-card">
                        <div class="place-header">
                            <span class="place-medal">🥇</span>
                            <h4>1. Plads (2 point)</h4>
                        </div>
                        <div class="team-buttons" id="firstPlaceButtons">
                            <!-- Team buttons will be generated here -->
                        </div>
                    </div>

                    <div class="winner-card">
                        <div class="place-header">
                            <span class="place-medal">🥈</span>
                            <h4>2. Plads (1 point)</h4>
                        </div>
                        <div class="team-buttons" id="secondPlaceButtons">
                            <!-- Team buttons will be generated here -->
                        </div>
                    </div>

                    <div class="winner-card" id="thirdPlaceCard">
                        <div class="place-header">
                            <span class="place-medal">🥉</span>
                            <h4>3. Plads (0 point)</h4>
                        </div>
                        <div class="team-buttons" id="thirdPlaceButtons">
                            <!-- Team buttons will be generated here -->
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button id="saveResultBtn" class="modal-btn primary" disabled>
                    💾 Gem Resultat
                </button>
                <button id="cancelResultBtn" class="modal-btn secondary" onclick="closeResultsModal()">
                    ❌ Annuller
                </button>
            </div>
        </div>
    </div>

    <script>
        // Games management with instant popup for results
        let teams = [];
        let games = [];
        let currentGame = null;
        let selectedResults = {
            first: null,
            second: null,
            third: null
        };

        // DOM elements
        const gameNameInput = document.getElementById('gameNameInput');
        const addGameBtn = document.getElementById('addGameBtn');
        const standingsGrid = document.getElementById('standingsGrid');
        const resultsModal = document.getElementById('resultsModal');
        const modalGameTitle = document.getElementById('modalGameTitle');
        const modalGameName = document.getElementById('modalGameName');
        const firstPlaceButtons = document.getElementById('firstPlaceButtons');
        const secondPlaceButtons = document.getElementById('secondPlaceButtons');
        const thirdPlaceButtons = document.getElementById('thirdPlaceButtons');
        const thirdPlaceCard = document.getElementById('thirdPlaceCard');
        const saveResultBtn = document.getElementById('saveResultBtn');
        const cancelResultBtn = document.getElementById('cancelResultBtn');
        const completedGames = document.getElementById('completedGames');
        const completedCount = document.getElementById('completedCount');
        const finishTournamentBtn = document.getElementById('finishTournamentBtn');
        const syncStatus = document.getElementById('syncStatus');
        const statusIndicator = document.getElementById('statusIndicator');
        const statusText = document.getElementById('statusText');

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Games page starting...');
            loadData();
            setupEventListeners();
            updateUI();
            updateSyncStatus();
            
            // Initialize sync
            setTimeout(() => {
                if (window.syncManager) {
                    window.syncManager.initialize().then(() => {
                        console.log('✅ Sync manager initialized');
                        updateSyncStatus();
                    }).catch(error => {
                        console.error('❌ Sync initialization failed:', error);
                        updateSyncStatus();
                    });
                }
            }, 1000);
        });

        function loadData() {
            try {
                // Load teams
                const teamsData = localStorage.getItem('bakken-teams');
                if (teamsData) {
                    const savedData = JSON.parse(teamsData);
                    teams = savedData.teams || [];
                    console.log('📥 Loaded teams:', teams.length);
                }

                // Load games
                const gamesData = localStorage.getItem('bakken-games');
                if (gamesData) {
                    const savedData = JSON.parse(gamesData);
                    games = savedData.games || [];
                    console.log('📥 Loaded games:', games.length);
                } else {
                    games = [];
                }
            } catch (e) {
                console.error('❌ Load failed:', e);
                teams = [];
                games = [];
            }
        }

        function saveData() {
            try {
                const gamesData = {
                    games: games,
                    lastUpdated: Date.now()
                };
                
                localStorage.setItem('bakken-games', JSON.stringify(gamesData));
                localStorage.setItem('bakken-games-last-update', Date.now().toString());
                console.log('💾 Saved games data');
                
                // Sync to cloud
                if (window.syncManager && window.syncManager.syncGames) {
                    window.syncManager.syncGames(gamesData);
                }
            } catch (e) {
                console.error('❌ Save failed:', e);
            }
        }

        function setupEventListeners() {
            // Add game functionality - opens popup immediately
            addGameBtn.addEventListener('click', addGameAndOpenPopup);
            gameNameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    addGameAndOpenPopup();
                }
            });
            gameNameInput.addEventListener('input', function() {
                addGameBtn.disabled = this.value.trim().length === 0;
            });

            // Result entry functionality
            saveResultBtn.addEventListener('click', saveGameResult);

            // Finish tournament
            finishTournamentBtn.addEventListener('click', finishTournament);

            // Modal close events
            resultsModal.addEventListener('click', function(e) {
                if (e.target === resultsModal || e.target.classList.contains('modal-backdrop')) {
                    closeResultsModal();
                }
            });

            // Keyboard events
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeResultsModal();
                }
            });

            // Sync events
            window.addEventListener('sync-status-changed', updateSyncStatus);
            setInterval(updateSyncStatus, 3000);
        }

        function addGameAndOpenPopup() {
            const gameName = gameNameInput.value.trim();
            
            if (gameName === '') {
                showMessage('⚠️ Indtast et spil navn', '#FF9A42');
                return;
            }
            
            if (teams.length < 2) {
                showMessage('⚠️ Minimum 2 hold krævet for at spille', '#FF9A42');
                return;
            }
            
            if (games.some(game => game.name.toLowerCase() === gameName.toLowerCase())) {
                showMessage('⚠️ Dette spil findes allerede', '#FF9A42');
                return;
            }
            
            // Create new game
            const newGame = {
                id: generateGameId(),
                name: gameName,
                status: 'active', // Set to active immediately
                results: null,
                createdAt: Date.now()
            };
            
            games.push(newGame);
            currentGame = newGame;
            console.log('➕ Added game and opening popup:', newGame);
            
            // Clear input
            gameNameInput.value = '';
            addGameBtn.disabled = true;
            
            // Open popup immediately
            openResultsPopup();
            
            showMessage(`✅ "${gameName}" tilføjet - indtast resultater`, '#4ECDC4');
            
            // Focus back to input after modal closes
            setTimeout(() => gameNameInput.focus(), 100);
        }

        function openResultsPopup() {
            if (!currentGame) return;
            
            // Reset selections
            selectedResults = { first: null, second: null, third: null };
            
            // Update modal content
            modalGameName.textContent = currentGame.name;
            
            // Generate team buttons
            generateTeamButtons();
            
            // Show/hide third place based on team count
            if (teams.length === 2) {
                thirdPlaceCard.style.display = 'none';
            } else {
                thirdPlaceCard.style.display = 'block';
            }
            
            // Show modal
            resultsModal.classList.add('active');
            
            // Disable save button initially
            saveResultBtn.disabled = true;
        }

        function closeResultsModal() {
            resultsModal.classList.remove('active');
            
            if (currentGame) {
                // If game wasn't completed, remove it
                if (currentGame.status === 'active' && !currentGame.results) {
                    games = games.filter(g => g.id !== currentGame.id);
                    console.log('🗑️ Removed uncompleted game:', currentGame.name);
                }
            }
            
            currentGame = null;
            selectedResults = { first: null, second: null, third: null };
            saveResultBtn.disabled = true;
            
            // Update UI
            updateUI();
        }

        function generateTeamButtons() {
            // First place buttons
            firstPlaceButtons.innerHTML = teams.map(team => `
                <button class="team-btn" data-team-id="${team.id}" onclick="selectTeamForPlace(${team.id}, 'first')">
                    ${escapeHtml(team.name)} (${team.players.length} spillere)
                </button>
            `).join('');
            
            // Second place buttons
            secondPlaceButtons.innerHTML = teams.map(team => `
                <button class="team-btn" data-team-id="${team.id}" onclick="selectTeamForPlace(${team.id}, 'second')">
                    ${escapeHtml(team.name)} (${team.players.length} spillere)
                </button>
            `).join('');
            
            // Third place buttons (only if more than 2 teams)
            if (teams.length > 2) {
                thirdPlaceButtons.innerHTML = teams.map(team => `
                    <button class="team-btn" data-team-id="${team.id}" onclick="selectTeamForPlace(${team.id}, 'third')">
                        ${escapeHtml(team.name)} (${team.players.length} spillere)
                    </button>
                `).join('');
            }
        }

        function selectTeamForPlace(teamId, place) {
            // Set selection
            selectedResults[place] = teamId;
            
            // Update button states
            updateTeamButtonStates();
            
            // Check if we can save
            const canSave = teams.length === 2 ? 
                (selectedResults.first !== null && selectedResults.second !== null) :
                (selectedResults.first !== null && selectedResults.second !== null && selectedResults.third !== null);
            
            saveResultBtn.disabled = !canSave;
            
            console.log('Selected results:', selectedResults);
        }

        function updateTeamButtonStates() {
            // Update first place buttons
            firstPlaceButtons.querySelectorAll('.team-btn').forEach(btn => {
                const teamId = parseInt(btn.dataset.teamId);
                btn.classList.toggle('selected', selectedResults.first === teamId);
                btn.disabled = (selectedResults.second === teamId || selectedResults.third === teamId);
            });
            
            // Update second place buttons
            secondPlaceButtons.querySelectorAll('.team-btn').forEach(btn => {
                const teamId = parseInt(btn.dataset.teamId);
                btn.classList.toggle('selected', selectedResults.second === teamId);
                btn.disabled = (selectedResults.first === teamId || selectedResults.third === teamId);
            });
            
            // Update third place buttons (only if more than 2 teams)
            if (teams.length > 2) {
                thirdPlaceButtons.querySelectorAll('.team-btn').forEach(btn => {
                    const teamId = parseInt(btn.dataset.teamId);
                    btn.classList.toggle('selected', selectedResults.third === teamId);
                    btn.disabled = (selectedResults.first === teamId || selectedResults.second === teamId);
                });
            }
        }

        function saveGameResult() {
            if (!currentGame) return;
            
            // Validate selections
            if (teams.length === 2) {
                if (!selectedResults.first || !selectedResults.second) {
                    showMessage('⚠️ Vælg både 1. og 2. plads', '#FF9A42');
                    return;
                }
                selectedResults.third = null;
            } else {
                if (!selectedResults.first || !selectedResults.second || !selectedResults.third) {
                    showMessage('⚠️ Vælg alle tre placeringer', '#FF9A42');
                    return;
                }
            }
            
            // Create results with point system: 1st=2pts, 2nd=1pt, 3rd=0pts
            const results = [];
            
            // First place (2 points)
            const firstTeam = teams.find(t => t.id === selectedResults.first);
            results.push({
                teamId: selectedResults.first,
                teamName: firstTeam.name,
                placement: 1,
                points: 2
            });
            
            // Second place (1 point)
            const secondTeam = teams.find(t => t.id === selectedResults.second);
            results.push({
                teamId: selectedResults.second,
                teamName: secondTeam.name,
                placement: 2,
                points: 1
            });
            
            // Third place (0 points) - only if more than 2 teams
            if (teams.length > 2 && selectedResults.third) {
                const thirdTeam = teams.find(t => t.id === selectedResults.third);
                results.push({
                    teamId: selectedResults.third,
                    teamName: thirdTeam.name,
                    placement: 3,
                    points: 0
                });
            }
            
            // Add any remaining teams as tied for last place (0 points)
            const placedTeamIds = [selectedResults.first, selectedResults.second, selectedResults.third].filter(id => id !== null);
            teams.forEach(team => {
                if (!placedTeamIds.includes(team.id)) {
                    results.push({
                        teamId: team.id,
                        teamName: team.name,
                        placement: teams.length > 2 ? 4 : 3,
                        points: 0
                    });
                }
            });
            
            // Save result
            currentGame.results = results;
            currentGame.status = 'completed';
            currentGame.completedAt = Date.now();
            
            console.log('💾 Saved game result:', currentGame);
            
            saveData();
            
            // Close modal
            resultsModal.classList.remove('active');
            currentGame = null;
            selectedResults = { first: null, second: null, third: null };
            
            updateUI();
            showMessage(`✅ Resultat gemt for "${currentGame ? currentGame.name : 'spillet'}"!`, '#4ECDC4');
            
            // Focus back to input
            gameNameInput.focus();
        }

        function deleteGame(gameId) {
            const game = games.find(g => g.id === gameId);
            if (!game) return;
            
            if (confirm(`Slet "${game.name}"?`)) {
                games = games.filter(g => g.id !== gameId);
                saveData();
                updateUI();
                showMessage(`🗑️ "${game.name}" slettet`, '#FF9A42');
            }
        }

        function updateUI() {
            updateStandings();
            updateCompletedGames();
            updateFinishButton();
        }

        function updateStandings() {
            if (teams.length === 0) {
                standingsGrid.innerHTML = '<div class="no-teams">Ingen hold fundet</div>';
                return;
            }
            
            // Calculate total points for each team
            const standings = teams.map(team => {
                let totalPoints = 0;
                let gamesPlayed = 0;
                
                games.forEach(game => {
                    if (game.status === 'completed' && game.results) {
                        const teamResult = game.results.find(r => r.teamId === team.id);
                        if (teamResult) {
                            totalPoints += teamResult.points;
                            gamesPlayed++;
                        }
                    }
                });
                
                return {
                    ...team,
                    totalPoints,
                    gamesPlayed
                };
            });
            
            // Sort by points (descending)
            standings.sort((a, b) => b.totalPoints - a.totalPoints);
            
            standingsGrid.innerHTML = standings.map((team, index) => `
                <div class="team-standing ${index === 0 ? 'first' : index === 1 ? 'second' : index === 2 ? 'third' : ''}">
                    <div class="standing-position">${index + 1}</div>
                    <div class="standing-info">
                        <div class="standing-team">${escapeHtml(team.name)}</div>
                        <div class="standing-members">${team.players.map(p => p.name).join(', ')}</div>
                        <div class="standing-games">Spil: ${team.gamesPlayed}</div>
                    </div>
                    <div class="standing-score">${team.totalPoints}</div>
                </div>
            `).join('');
        }

        function updateCompletedGames() {
            const completedGamesList = games.filter(g => g.status === 'completed');
            completedCount.textContent = completedGamesList.length;
            
            if (completedGamesList.length === 0) {
                completedGames.innerHTML = '<div class="no-completed"><p>Ingen afsluttede spil endnu</p></div>';
                return;
            }
            
            completedGames.innerHTML = completedGamesList.map(game => `
                <div class="completed-game">
                    <div class="completed-game-info">
                        <div class="completed-game-name">${escapeHtml(game.name)}</div>
                        <div class="completed-game-result">
                            🥇 ${game.results[0].teamName} (2 pt) | 
                            🥈 ${game.results[1].teamName} (1 pt)
                            ${game.results.length > 2 && game.results[2] ? ` | 🥉 ${game.results[2].teamName} (0 pt)` : ''}
                        </div>
                    </div>
                    <button class="delete-game-btn" onclick="deleteGame('${game.id}')" title="Slet spil">
                        🗑️
                    </button>
                </div>
            `).join('');
        }

        function updateFinishButton() {
            const completedGamesCount = games.filter(g => g.status === 'completed').length;
            finishTournamentBtn.disabled = completedGamesCount === 0;
        }

        function finishTournament() {
            const completedGamesCount = games.filter(g => g.status === 'completed').length;
            
            if (completedGamesCount === 0) {
                showMessage('⚠️ Ingen spil er afsluttet endnu', '#FF9A42');
                return;
            }
            
            if (confirm(`Afslut turneringen med ${completedGamesCount} spil?`)) {
                updateStandings();
                showMessage('🏁 Turnering afsluttet! Se billeder for at gemme minder.', '#4ECDC4');
                
                setTimeout(() => {
                    window.location.href = 'photos.html';
                }, 3000);
            }
        }

        function updateSyncStatus() {
            if (window.syncManager) {
                const status = window.syncManager.getStatus();
                
                if (!status.initialized) {
                    statusIndicator.textContent = '🔄';
                    statusText.textContent = 'Connecting...';
                    syncStatus.style.background = 'rgba(255, 179, 102, 0.3)';
                } else if (!status.hasSupabase) {
                    statusIndicator.textContent = '📱';
                    statusText.textContent = 'Local only';
                    syncStatus.style.background = 'rgba(102, 102, 102, 0.3)';
                } else if (!status.online) {
                    statusIndicator.textContent = '📱';
                    statusText.textContent = 'Offline';
                    syncStatus.style.background = 'rgba(255, 154, 66, 0.3)';
                } else if (status.pendingSync > 0) {
                    statusIndicator.textContent = '⏳';
                    statusText.textContent = `Syncing...`;
                    syncStatus.style.background = 'rgba(69, 183, 209, 0.3)';
                } else {
                    statusIndicator.textContent = '☁️';
                    statusText.textContent = 'Synced';
                    syncStatus.style.background = 'rgba(78, 205, 196, 0.3)';
                }
            } else {
                statusIndicator.textContent = '📱';
                statusText.textContent = 'Local only';
                syncStatus.style.background = 'rgba(102, 102, 102, 0.3)';
            }
        }

        function showMessage(message, color) {
            const existingMessage = document.querySelector('.message');
            if (existingMessage) existingMessage.remove();
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            messageDiv.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: ${color};
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                z-index: 2000;
                animation: slideDown 0.3s ease;
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                font-weight: 500;
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255,255,255,0.1);
            `;
            messageDiv.textContent = message;
            document.body.appendChild(messageDiv);
            
            setTimeout(() => {
                if (messageDiv.parentNode) {
                    messageDiv.style.animation = 'slideUp 0.3s ease forwards';
                    setTimeout(() => messageDiv.remove(), 300);
                }
            }, 3000);
        }

        function generateGameId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2, 5);
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Add animations and modal styles
        if (!document.getElementById('games-animations')) {
            const animationStyle = document.createElement('style');
            animationStyle.id = 'games-animations';
            animationStyle.textContent = `
                @keyframes slideDown {
                    from { opacity: 0; transform: translateX(-50%) translateY(-20px); }
                    to { opacity: 1; transform: translateX(-50%) translateY(0); }
                }
                
                @keyframes slideUp {
                    from { opacity: 1; transform: translateX(-50%) translateY(0); }
                    to { opacity: 0; transform: translateX(-50%) translateY(-20px); }
                }
                
                .results-modal {
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0, 0, 0, 0.8);
                    display: none;
                    align-items: center;
                    justify-content: center;
                    z-index: 1000;
                    padding: 20px;
                }
                
                .results-modal.active {
                    display: flex;
                    animation: fadeIn 0.3s ease;
                }
                
                .modal-backdrop {
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                }
                
                .modal-content {
                    background: white;
                    border-radius: 15px;
                    max-width: 500px;
                    width: 100%;
                    max-height: 90vh;
                    overflow-y: auto;
                    position: relative;
                    animation: slideInUp 0.3s ease;
                }
                
                .modal-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 20px;
                    border-bottom: 1px solid #eee;
                }
                
                .modal-header h2 {
                    margin: 0;
                    color: #333;
                }
                
                .close-btn {
                    background: none;
                    border: none;
                    font-size: 24px;
                    cursor: pointer;
                    color: #666;
                    padding: 5px;
                    border-radius: 50%;
                    width: 35px;
                    height: 35px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }
                
                .close-btn:hover {
                    background: #f0f0f0;
                    color: #333;
                }
                
                .modal-body {
                    padding: 20px;
                }
                
                .modal-footer {
                    display: flex;
                    gap: 10px;
                    padding: 20px;
                    border-top: 1px solid #eee;
                    justify-content: flex-end;
                }
                
                .modal-btn {
                    padding: 12px 24px;
                    border: none;
                    border-radius: 8px;
                    font-weight: 500;
                    cursor: pointer;
                    transition: all 0.3s ease;
                }
                
                .modal-btn.primary {
                    background: #FFB366;
                    color: white;
                }
                
                .modal-btn.primary:hover:not(:disabled) {
                    background: #FF9A42;
                }
                
                .modal-btn.primary:disabled {
                    background: #ccc;
                    cursor: not-allowed;
                }
                
                .modal-btn.secondary {
                    background: #f0f0f0;
                    color: #666;
                }
                
                .modal-btn.secondary:hover {
                    background: #e0e0e0;
                }
                
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                
                @keyframes slideInUp {
                    from { opacity: 0; transform: translateY(50px); }
                    to { opacity: 1; transform: translateY(0); }
                }
            `;
            document.head.appendChild(animationStyle);
        }

        // Debug function
        window.debugGames = function() {
            console.log('🔍 Debug Games Data:');
            console.log('Teams:', teams);
            console.log('Games:', games);
            console.log('Current Game:', currentGame);
            console.log('Selected Results:', selectedResults);
        };
    </script>
</body>
</html>